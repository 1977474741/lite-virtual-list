# lite-virtual-list
 ![version](https://img.shields.io/github/package-json/v/wensiyuanseven/lite-virtual-list) ![last commit](https://img.shields.io/github/last-commit/wensiyuanseven/lite-virtual-list)  ![issues](https://img.shields.io/github/issues/wensiyuanseven/lite-virtual-list)
<svg id="Capa_1" enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><g><g><path d="m445.8 428.311-88.809 47.122-100.991 36.567h-96.57c-29.6 0-56.73-16.18-70.81-42.22l-22.42-41.47c-7.347-13.585 8.295-28.07 21.27-19.78 13.87 8.87 28.41 8.89 28.55 8.89.49-.01.97.01 1.46.05.43.03 46.24 3.38 85.8-14.37 29.049-13.035 76.339-13.045 105.43 0 39.56 17.75 85.38 14.4 85.83 14.37.52-.04.87-.06 1.38-.05.95-.01 15.23-.34 28.61-8.89 12.993-8.3 28.608 6.212 21.27 19.781z" fill="#add3d8"/></g><path d="m445.8 428.311-22.43 41.47c-14.07 26.039-41.2 42.219-70.81 42.219h-96.56v-118.679c19.09 0 38.17 3.26 52.71 9.78 39.56 17.75 85.38 14.4 85.83 14.37.52-.04.87-.06 1.38-.05.95-.01 15.23-.34 28.61-8.89 12.993-8.301 28.608 6.211 21.27 19.78z" fill="#81a1b1"/><g><path d="m467.99 100.824-54.09 34.93c-7.454 4.807-17.41 2.139-21.47-5.73-6.82-13.23-16.93-24.68-29.23-33.11-6.7-4.59-8.53-13.68-4.12-20.5l33.14-51.339c18.906-29.273 60.041-33.745 84.79-9.02 24.701 24.721 20.276 65.853-9.02 84.769z" fill="#5a7983"/></g><path d="m148.8 96.913c-12.235 8.387-22.332 19.732-29.24 33.11-4.027 7.804-13.973 10.555-21.47 5.72l-54.08-34.92c-13.97-9.03-23-23.69-24.76-40.23s3.97-32.77 15.73-44.53c24.785-24.785 65.921-20.197 84.79 9l33.14 51.349c4.41 6.822 2.58 15.912-4.11 20.501z" fill="#81a1b1"/><g><path d="m419.26 278.702c-1.5-.62-3.72-1.28-6.28-2.04-29.958-8.889-31.17-15.675-54.65-22.4-12.65-3.65-28.03-5.89-54.86 2.31-20.726 6.38-27.565 13.137-47.47 12.82-9.31-.15-18.6-2.25-27.2-6.27-34.063-15.931-61.13-17.4-101.94 3.33-18.096 9.226-27.096 9.365-34.11 12.24-10.303 4.254-21.528-3.831-20.69-15.01l7.61-99.269c2.235-37.483 21.702-71.343 52.15-92.239 11.85-8.13 24.97-14.04 39.01-17.53 27.87-6.94 56.51-10.4 85.17-10.4 28.65 0 77.573 33.282 77.573 33.282l79.395 94.606 26.972 91.55c.836 11.134-10.331 19.271-20.68 15.02z" fill="#add3d8"/></g><path d="m419.26 278.702c-1.5-.62-3.72-1.28-6.28-2.04-29.958-8.889-31.17-15.675-54.65-22.4-12.65-3.65-28.03-5.89-54.86 2.31-20.726 6.38-27.565 13.137-47.47 12.82v-225.148c28.65 0 57.29 3.46 85.14 10.39 14.05 3.5 27.18 9.4 39.03 17.55 16.37 11.22 29.83 26.47 38.92 44.1 7.78 15.02 12.23 31.23 13.23 48.129l7.62 99.269c.836 11.134-10.331 19.271-20.68 15.02z" fill="#81a1b1"/><g><path d="m440.689 433.821c-19.867 12.701-38.606 13.95-56.15 13.95-18.48 0-54.53-2.24-88.1-17.29-10.58-4.75-25.51-7.12-40.43-7.12-14.93-.01-29.86 2.37-40.44 7.12-44.47 19.94-93.32 17.39-99.85 16.94-4.64-.04-24.64-.98-44.39-13.6-18.78-11.98-40.92-37.1-39.7-88.719.937-39.427 13.341-79.154 49.68-94.139 10.699-4.419 16.505-3.364 31.96-11.25 10.32-5.24 20.67-9.47 30.78-12.58 25.62-7.91 47.2-8.16 72.15-.85 23.852 6.995 26.516 12.683 39.81 13.11 12.837.358 15.72-4.424 38.67-11.5 34.49-10.552 64.436-10.506 103.4 10.62 14.92 8.104 24.216 8.972 32.62 12.45 13.42 5.53 24.85 15.39 33.06 28.52 10.39 16.61 15.98 38.69 16.61 65.629 1.24 51.609-20.89 76.729-39.68 88.709z" fill="#81a1b1"/></g><g><path d="m146.245 334.522h-16.238c-8.284 0-15-6.716-15-15s6.716-15 15-15h16.238c4.955 0 8.985-4.031 8.985-8.986 0-8.284 6.716-15 15-15s15 6.716 15 15c0 21.497-17.489 38.986-38.985 38.986z" fill="#525e63"/></g><path d="m440.68 433.821c-19.867 12.701-38.606 13.95-56.15 13.95-18.48 0-54.53-2.24-88.1-17.29-10.58-4.75-25.51-7.12-40.43-7.12v-183.969c5.37.15 10.78-.86 15.84-3.04 7.69-3.32 15.37-6.16 22.83-8.46 34.49-10.552 64.436-10.506 103.4 10.62 14.92 8.104 24.216 8.972 32.62 12.45 13.42 5.53 24.85 15.39 33.06 28.52 10.39 16.61 15.98 38.69 16.61 65.629 1.24 51.61-20.89 76.73-39.68 88.71z" fill="#5a7983"/><g><path d="m381.992 334.522h-16.238c-21.497 0-38.986-17.489-38.986-38.986 0-8.284 6.716-15 15-15s15 6.716 15 15c0 4.955 4.031 8.986 8.986 8.986h16.238c8.284 0 15 6.716 15 15s-6.716 15-15 15z" fill="#414c51"/></g><g><circle cx="155.006" cy="161.619" fill="#525e63" r="15"/></g><g><circle cx="356.992" cy="161.619" fill="#414c51" r="15"/></g></g></svg>
## 基于vue的高性能虚拟列表组件库

- **支持固定高度**

- **支持可变高度**

- **支持两栏瀑布流布局**

- **渲染DOM可配置多屏**

- **支持数据动态追加**

 #### 文档：<https://wensiyuanseven.github.io/lite-virtual-list>

 #### 案例：<https://wensiyuanseven.github.io/lite-virtual-list/example>

## 用法

### 安装

``` sh
npm install lite-virtual-list
```
### 使用
```js
import liteVirtualList from "lite-virtual-list"

Vue.use(liteVirtualList)
```

```vue
<template>
  <lite-virtual-list type="fixed" :size="80" :remain="8" :data="items">
    <div slot-scope="{ item }" style="height: 80px">{{ item.value }}</div>
  </lite-virtual-list>
</template>
<script>
    let items = []
    let count = 1000
    for (let i = 0; i < count; i++) {
        items.push({ id: i, value: i })
    }
    export default {
        data() {
            return { items }
        }
    }
</script>
```

## Props

| Props    | Type  |Default| Required   | Description                                   |
|:---------|:------|:-----------|:------------|:----------------------------------------
| data     | Array |[ ]| ✓          | 数据源,数据源中的每个item必须是一个对象, 每个item必须传入一个唯一id值  `{ id : Number | String }`,当type为`waterfall`时,每个item传入height字段 `{ height : Number | String }`,即每一项item的高度|
| type | String    | | ✓ |  type可指定三种类型 `fixed` `variable` `waterfall` fixed : item的高度为固定值    variable : item的高度根据内容撑起  waterfall : 瀑布流布局                              |
| remain   | Number \| String    | |  ✓  |  每屏可见的数据条数 |
| size   | Number \| String    |  |   |  size是每一项item的高度。 当type为 `fixed`或 `variable` 时size为必传项。 type为`variable`时 size会被当做每一项的默认高度，当DOM渲染完成后会用真实高度替换此默认高度 |
| screen   | Array    | [ 1 , 1 ]|   |  可视区前后渲染的屏数。 默认值为`[1,1]`,可视区前后各渲染一屏。 例：:screen="[2,3]" 鸟事可视区前面渲染两屏，可视区后面渲染三屏。 |
| distance   | Number \| String    |50|    |  页面滚动时触发`loadMore`回调的距离,默认为`50` |
| interval   | Number \| String    | 0|   |  `scroll`事件触发间隔,默认为`0` |
| virtualHieght   | String    | 100%|   |  虚拟列表的高度,默认为`100%`。当type为`fixed`时，高度会根据`size`和`remain`属性动态计算出来，不用传入此值。当type为`variable`或 `waterfall`时，若不传入此属性，外部容器必须声明一个高度值。 |
| unit   | String    | px |   |  单位，默认为`px` |
| marginBottom   |  Number \| String     |  0 |  |  每项item的间隔距离。 此属性专门为`type='waterfall'`时提供,type为`fixed`或`variable`时此属性无效 |

## Slot

 ```vue
  <lite-virtual-list >
    <!-- 默认slot,可拿到每个item数据 -->
    <template slot="default" slot-scope="{ item }" >
       <div>{{item.id}}</div>
    </template>

    <!-- 底部 -->
    <template slot="bottom">
      <div>加载中...</div>
    </template>
  </lite-virtual-list>
 ```

## Event

### scroll

  页面滚动时触发

  该回调会返回一个对象

  当type为`fixed`或`variable`时,该对象包含以下 property :

- `scrollTop` : 页面滚动的距离

- `renderScrollTop` : 渲染区域距离页面滚动的距离

- `renderData` : 滚动时渲染的数据

当type为`waterfall`时,该对象包含以下 property :

- `scrollTop` : 页面滚动的距离

- `renderLeftScrollTop` : 左列数据渲染区域距离页面滚动的距离

- `renderRightScrollTop` : 右列数据渲染区域距离页面滚动的距离
- `renderLeftData` : 左列滚动被渲染的数据
- `renderLeftData` : 右列滚动时渲染的数据

### domUpdateSuccess

 DOM渲染到页面之后触发

  当type为`fixed`或`variable`时,该回调会返回

  `renderData` : 渲染到页面上的数据

  当type为`variable`时,该回调会返回一个对象,该对象包含以下 property :

- `renderLeftData` : 左列滚动被渲染的数据
- `renderLeftData` : 右列滚动时渲染的数据

### loadMore

 页面滚动到底部时触发 ,可结合`distance`属性配置距离底部多远时触发此回调，默认为`50`
 
